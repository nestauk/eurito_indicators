<script>
	import {onMount} from 'svelte';
	import {fontFamily, fontScaling, fontVariationSettings} from 'app/stores/fontScaling';

	const fontFamilies = [
		'Archivo',
		'Open Dyslexia'
	]
	const fontVariations = {
		'Archivo': [
			"'wdth' 80",
			"'wdth' 100",
			"'wdth' 125",
		]
	};
	const fontSizes = [0.75, 1.0, 1.25];

	let currentFamilyIndex = 1;
	let currentSizeIndex = 0;
	let currentVariationIndex = 0;
	let variationsEnabled = true;

	const nextFont = () => {
		currentFamilyIndex += 1;
		currentFamilyIndex %= fontFamilies.length;
		const fam = fontFamilies[currentFamilyIndex];
		fontFamily.set(fam);
		variationsEnabled = fam in fontVariations;
	}
	const nextSize = () => {
		currentSizeIndex += 1;
		currentSizeIndex %= fontSizes.length;
		fontScaling.set(fontSizes[currentSizeIndex]);
	}
	const nextVariation = () => {
		if (!variationsEnabled) {
			return;
		}
		currentVariationIndex += 1;
		currentVariationIndex %= fontVariations[$fontFamily].length;
		fontVariationSettings.set(fontVariations[$fontFamily][currentVariationIndex]);
	}

	onMount( () => {
		nextFont();
		nextSize();
		nextVariation();
	})
</script>

<div>
	<button on:click={nextFont}>font</button>
	<button on:click={nextSize}>size</button>
	<button disabled={!variationsEnabled} on:click={nextVariation}>width</button>
</div>
<style>
	div {
		position: absolute;
		background: white;
		border: thin solid black;
	}
</style>